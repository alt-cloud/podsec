source /etc/os-release

if echo $CPE_NAME | grep spserver >/dev/null 2>&1
then
  export U7S_PLATFORM="k8s-c10f1"
else
  export U7S_PLATFORM="k8s-p10"
fi
platformDir="/etc/podsec/u7s/env/"

if [ -z "$U7S_KUBEVERSION" ]
then
  export U7S_KUBEVERSION="v1.26.3"
fi

source "$platformDir/$U7S_KUBEVERSION"

export U7S_COREDNS_IMAGE="$U7S_PLATFORM/coredns:$U7S_COREDNS_VERSION"
export U7S_PAUSE_IMAGE="$U7S_PLATFORM/pause:$U7S_PAUSE_VERSION"
export U7S_KUBECONTROLLER_IMAGE="$U7S_PLATFORM/kube-controller-manager:$U7S_KUBEVERSION"
export U7S_KUBEAPISERVER_IMAGE="$U7S_PLATFORM/kube-apiserver:$U7S_KUBEVERSION"
export U7S_KUBEPROXY_IMAGE="$U7S_PLATFORM/kube-proxy:$U7S_KUBEVERSION"
export U7S_ETCD_IMAGE="$U7S_PLATFORM/etcd:$U7S_ETCD_VERSION"
export U7S_FLANNEL_IMAGE="$U7S_PLATFORM/flannel:$U7S_FLANNEL_VERSION"
export U7S_KUBESCHEDULER_IMAGE="$U7S_PLATFORM/kube-scheduler:$U7S_KUBEVERSION"
export U7S_FLANNEL_CNI_IMAGE="$U7S_PLATFORM/flannel-cni-plugin:$U7S_FLANNEL_CNI_VERSION"
export U7S_CERTMANAGER_CONTROLLER_IMAGE="$U7S_PLATFORM/cert-manager-controller:$U7S_CERTMANAGER_VERSION"
export U7S_CERTMANAGER_CAINJECTOR_IMAGE="$U7S_PLATFORM/cert-manager-cainjector:$U7S_CERTMANAGER_VERSION"
export U7S_CERTMANAGER_WEBHOOK_IMAGE="$U7S_PLATFORM/cert-manager-webhook:$U7S_CERTMANAGER_VERSION"

export U7S_IMAGES="$U7S_KUBEAPISERVER_IMAGE
$U7S_KUBECONTROLLER_IMAGE
$U7S_KUBEPROXY_IMAGE
$U7S_KUBESCHEDULER_IMAGE
$U7S_COREDNS_IMAGE
$U7S_ETCD_IMAGE
$U7S_FLANNEL_IMAGE
$U7S_FLANNEL_CNI_IMAGE
$U7S_PAUSE_IMAGE
$U7S_CERTMANAGER_CONTROLLER_IMAGE
$U7S_CERTMANAGER_CAINJECTOR_IMAGE
$U7S_CERTMANAGER_WEBHOOK_IMAGE
"

